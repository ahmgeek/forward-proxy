<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>index.html - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
  
    <li><a href="../Gemfile.html">Gemfile</a>
  
    <li><a href="../LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../README_md.html">README</a>
  
    <li><a href="../Rakefile.html">Rakefile</a>
  
    <li><a href="../bin/setup.html">setup</a>
  
    <li><a href="../coverage/assets/0_10_2/application_css.html">application.css</a>
  
    <li><a href="../coverage/assets/0_10_2/application_js.html">application.js</a>
  
    <li><a href="../coverage/index_html.html">index.html</a>
  
    <li><a href="../forward-proxy_gemspec.html">forward-proxy.gemspec</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page coverage/index.html">

<p>&lt;!DOCTYPE html&gt; &lt;html xmlns=&#39;<a
href="http://www.w3.org/1999/xhtml">www.w3.org/1999/xhtml</a>&#39;&gt;</p>

<pre>&lt;head&gt;
  &lt;title&gt;Code coverage for Forward-proxy&lt;/title&gt;
  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
  &lt;script src=&#39;./assets/0.10.2/application.js&#39; type=&#39;text/javascript&#39;&gt;&lt;/script&gt;    
  &lt;link href=&#39;./assets/0.10.2/application.css&#39; media=&#39;screen, projection, print&#39; rel=&#39;stylesheet&#39; type=&#39;text/css&#39;&gt;
  &lt;link rel=&quot;shortcut icon&quot; type=&quot;image/png&quot; href=&quot;./assets/0.10.2/favicon_green.png&quot; /&gt;
  &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;./assets/0.10.2/favicon.png&quot; /&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;div id=&quot;loading&quot;&gt;
    &lt;img src=&quot;./assets/0.10.2/loading.gif&quot; alt=&quot;loading&quot;/&gt;
  &lt;/div&gt;
  &lt;div id=&quot;wrapper&quot; style=&quot;display:none;&quot;&gt;
    &lt;div class=&quot;timestamp&quot;&gt;Generated &lt;abbr class=&quot;timeago&quot; title=&quot;2021-01-15T23:51:13+11:00&quot;&gt;2021-01-15T23:51:13+11:00&lt;/abbr&gt;&lt;/div&gt;
    &lt;ul class=&quot;group_tabs&quot;&gt;&lt;/ul&gt;

    &lt;div id=&quot;content&quot;&gt;
      &lt;div class=&quot;file_list_container&quot; id=&quot;AllFiles&quot;&gt;
&lt;h2&gt;
  &lt;span class=&quot;group_name&quot;&gt;All Files&lt;/span&gt;
  (&lt;span class=&quot;covered_percent&quot;&gt;&lt;span class=&quot;green&quot;&gt;94.79%&lt;/span&gt;&lt;/span&gt;
   covered at
   &lt;span class=&quot;covered_strength&quot;&gt;
     &lt;span class=&quot;green&quot;&gt;
       9.89
     &lt;/span&gt;
  &lt;/span&gt; hits/line)
&lt;/h2&gt;
&lt;a name=&quot;AllFiles&quot;&gt;&lt;/a&gt;
&lt;div&gt;
  &lt;b&gt;4&lt;/b&gt; files in total.
  &lt;b&gt;96&lt;/b&gt; relevant lines. 
  &lt;span class=&quot;green&quot;&gt;&lt;b&gt;91&lt;/b&gt; lines covered&lt;/span&gt; and
  &lt;span class=&quot;red&quot;&gt;&lt;b&gt;5&lt;/b&gt; lines missed &lt;/span&gt;
&lt;/div&gt;
&lt;table class=&quot;file_list&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;File&lt;/th&gt;
      &lt;th&gt;% covered&lt;/th&gt;
      &lt;th&gt;Lines&lt;/th&gt;
      &lt;th&gt;Relevant Lines&lt;/th&gt;
      &lt;th&gt;Lines covered&lt;/th&gt;
      &lt;th&gt;Lines missed&lt;/th&gt;
      &lt;th&gt;Avg. Hits / Line&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;

    &lt;tr&gt;
      &lt;td class=&quot;strong&quot;&gt;&lt;a href=&quot;#737c1f3a62200388f1e9020e3ad551bc81946e3c&quot; class=&quot;src_link&quot; title=&quot;lib/forward_proxy.rb&quot;&gt;lib/forward_proxy.rb&lt;/a&gt;&lt;/td&gt;
      &lt;td class=&quot;green strong&quot;&gt;100.0 %&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;

    &lt;tr&gt;
      &lt;td class=&quot;strong&quot;&gt;&lt;a href=&quot;#9c385de0b724d0a16488f5a94391dfb52a35ce30&quot; class=&quot;src_link&quot; title=&quot;lib/forward_proxy/server.rb&quot;&gt;lib/forward_proxy/server.rb&lt;/a&gt;&lt;/td&gt;
      &lt;td class=&quot;green strong&quot;&gt;92.96 %&lt;/td&gt;
      &lt;td&gt;177&lt;/td&gt;
      &lt;td&gt;71&lt;/td&gt;
      &lt;td&gt;66&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;2.0&lt;/td&gt;
    &lt;/tr&gt;

    &lt;tr&gt;
      &lt;td class=&quot;strong&quot;&gt;&lt;a href=&quot;#7eb8b9fd428dbcfc9e26e54dab1a24e2580a5f73&quot; class=&quot;src_link&quot; title=&quot;lib/forward_proxy/thread_pool.rb&quot;&gt;lib/forward_proxy/thread_pool.rb&lt;/a&gt;&lt;/td&gt;
      &lt;td class=&quot;green strong&quot;&gt;100.0 %&lt;/td&gt;
      &lt;td&gt;36&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
      &lt;td&gt;20&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;40.1&lt;/td&gt;
    &lt;/tr&gt;

    &lt;tr&gt;
      &lt;td class=&quot;strong&quot;&gt;&lt;a href=&quot;#e2da9243213d13a1f1a550ab692a4692e0970fdd&quot; class=&quot;src_link&quot; title=&quot;lib/forward_proxy/version.rb&quot;&gt;lib/forward_proxy/version.rb&lt;/a&gt;&lt;/td&gt;
      &lt;td class=&quot;green strong&quot;&gt;100.0 %&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1.0&lt;/td&gt;
    &lt;/tr&gt;

  &lt;/tbody&gt;
&lt;/table&gt;</pre>

<p>&lt;/div&gt;</p>

<pre>    &lt;/div&gt;

    &lt;div id=&quot;footer&quot;&gt;
      Generated by &lt;a href=&quot;http://github.com/colszowka/simplecov&quot;&gt;simplecov&lt;/a&gt; v0.17.1 
      and simplecov-html v0.10.2&lt;br/&gt;
      using Unit Tests
    &lt;/div&gt;

    &lt;div class=&quot;source_files&quot;&gt;

      &lt;div class=&quot;source_table&quot; id=&quot;737c1f3a62200388f1e9020e3ad551bc81946e3c&quot;&gt;
&lt;div class=&quot;header&quot;&gt;
  &lt;h3&gt;lib/forward_proxy.rb&lt;/h3&gt;
  &lt;h4&gt;&lt;span class=&quot;green&quot;&gt;100.0 %&lt;/span&gt; covered&lt;/h4&gt;
  &lt;div&gt;
    &lt;b&gt;3&lt;/b&gt; relevant lines. 
    &lt;span class=&quot;green&quot;&gt;&lt;b&gt;3&lt;/b&gt; lines covered&lt;/span&gt; and
    &lt;span class=&quot;red&quot;&gt;&lt;b&gt;0&lt;/b&gt; lines missed.&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;pre&gt;
  &lt;ol&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;1&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;$:.unshift File.dirname(__FILE__)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;2&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;3&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;forward_proxy/version&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;4&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;forward_proxy/server&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

  &lt;/ol&gt;
&lt;/pre&gt;</pre>

<p>&lt;/div&gt;</p>

<pre>      &lt;div class=&quot;source_table&quot; id=&quot;9c385de0b724d0a16488f5a94391dfb52a35ce30&quot;&gt;
&lt;div class=&quot;header&quot;&gt;
  &lt;h3&gt;lib/forward_proxy/server.rb&lt;/h3&gt;
  &lt;h4&gt;&lt;span class=&quot;green&quot;&gt;92.96 %&lt;/span&gt; covered&lt;/h4&gt;
  &lt;div&gt;
    &lt;b&gt;71&lt;/b&gt; relevant lines. 
    &lt;span class=&quot;green&quot;&gt;&lt;b&gt;66&lt;/b&gt; lines covered&lt;/span&gt; and
    &lt;span class=&quot;red&quot;&gt;&lt;b&gt;5&lt;/b&gt; lines missed.&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;pre&gt;
  &lt;ol&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;1&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;forward_proxy/thread_pool&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;2&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;socket&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;3&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;webrick&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;4&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;require &amp;#39;net/http&amp;#39;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;5&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;6&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;module ForwardProxy&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;7&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;  class HTTPMethodNotImplemented &amp;lt; StandardError; end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;8&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;  class HTTPParseError &amp;lt; StandardError; end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;9&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;10&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;  class Server&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;11&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    attr_reader :bind_address, :bind_port&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;12&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;13&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def initialize(bind_address: &amp;quot;127.0.0.1&amp;quot;, bind_port: 9292, threads: 32)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;14&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @thread_pool = ThreadPool.new(threads)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;15&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @bind_address = bind_address&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;16&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @bind_port = bind_port&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;17&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;18&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;19&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def start&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;20&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      thread_pool.start&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;21&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;22&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @server = TCPServer.new(bind_address, bind_port)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;23&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;24&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(&amp;quot;Listening #{bind_address}:#{bind_port}&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;25&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;26&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      loop do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;27&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # The following comments are from https://stackoverflow.com/q/5124320/273101&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;28&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # &lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;29&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # accept(): POSIX.1-2001, POSIX.1-2008, SVr4, 4.4BSD (accept() first appeared in 4.2BSD).&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;30&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # &lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;31&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # We see that POSIX.1-2008 is a viable reference (check this for a description of relevant &lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;32&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # standards for Linux systems). As already said in other answers, POSIX.1 standard specifies &lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;33&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # accept function as (POSIX-)thread safe (as defined in Base Definitions, section 3.399 Thread Safe)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;34&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        # by not listing it on System Interfaces, section 2.9.1 Thread Safety.&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;6&quot; data-linenumber=&quot;35&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;6&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        thread_pool.schedule(server.accept) do |client_conn|&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;36&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;          begin&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;37&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            req = parse_req(client_conn)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;38&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;39&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            log(req.request_line)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;40&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;41&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            case req.request_method&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;42&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            when METHOD_CONNECT then handle_tunnel(client_conn, req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;43&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            when METHOD_GET, METHOD_POST then handle(client_conn, req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;44&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            else&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;45&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;              raise HTTPMethodNotImplemented&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;46&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;47&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;          rescue =&amp;gt; e&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;48&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # The following comments are from the IETF document&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;49&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # &amp;quot;Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;50&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # https://tools.ietf.org/html/rfc7231#section-6.6.3&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;51&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;52&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # The 502 (Bad Gateway) status code indicates that the server, while&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;53&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # acting as a gateway or proxy, received an invalid response from an&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;54&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            # inbound server it accessed while attempting to fulfill the request.&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;55&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            client_conn.puts &amp;lt;&amp;lt;~eos.chomp&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;56&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;              HTTP/1.1 502&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;57&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;              Server: ForwardProxy&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;58&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            eos&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;59&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;60&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            puts e.message&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;7&quot; data-linenumber=&quot;61&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;7&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            puts e.backtrace.map { |line| &amp;quot;  #{line}&amp;quot; }&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;62&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;          ensure&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;63&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            client_conn.close&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;64&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;          end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;65&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;66&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;67&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    rescue Interrupt&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;missed&quot; data-hits=&quot;0&quot; data-linenumber=&quot;68&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(&amp;quot;Exiting...&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;69&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    rescue IOError, Errno::EBADF =&amp;gt; e&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;70&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(e.message, &amp;quot;ERROR&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;71&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;72&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;73&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def shutdown&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;74&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(&amp;quot;Closing client connections...&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;75&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      thread_pool.shutdown&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;76&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;77&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(&amp;quot;Stoping server...&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;78&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      server.close if server&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;79&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;80&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;81&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    private&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;82&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;83&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    attr_reader :server, :thread_pool&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;84&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;85&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    METHOD_CONNECT = &amp;quot;CONNECT&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;86&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    METHOD_GET = &amp;quot;GET&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;87&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    METHOD_POST = &amp;quot;POST&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;88&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;89&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def handle_tunnel(client_conn, req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;90&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # The following comments are from the IETF document&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;91&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # &amp;quot;Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;92&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # https://tools.ietf.org/html/rfc7231#section-4.3.6&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;93&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;94&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # A client sending a CONNECT request MUST send the authority form of&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;95&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # request-target (Section 5.3 of [RFC7230]); i.e., the request-target&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;96&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # consists of only the host name and port number of the tunnel&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;97&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # destination, separated by a colon.  For example,&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;98&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      #&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;99&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      #   CONNECT server.example.com:80 HTTP/1.1&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;100&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      #   Host: server.example.com:80&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;101&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      #&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;102&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      host, port = *req[&amp;#39;Host&amp;#39;].split(&amp;#39;:&amp;#39;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;103&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      dest_conn = TCPSocket.new(host, port)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;104&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;105&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # Any 2xx (Successful) response indicates that the sender (and all&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;106&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # inbound proxies) will switch to tunnel mode immediately after the&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;107&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # blank line that concludes the successful response&amp;#39;s header section;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;108&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # data received after that blank line is from the server identified by&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;109&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # the request-target.&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;110&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      client_conn.write &amp;quot;HTTP/1.1 200 OK\n\n&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;111&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;112&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # The CONNECT method requests that the recipient establish a tunnel to&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;113&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # the destination origin server identified by the request-target and,&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;114&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # if successful, thereafter restrict its behavior to blind forwarding&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;115&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # of packets, in both directions, until the tunnel is closed.&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;116&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      [&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;117&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        Thread.new { transfer(client_conn, dest_conn) },&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;118&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        Thread.new { transfer(dest_conn, client_conn) }&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;119&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      ].each(&amp;amp;:join)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;120&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    ensure&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;121&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      dest_conn.close&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;122&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;123&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;124&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def handle(client_conn, req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;125&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      resp = Net::HTTP.start(req.host, req.port) do |http|&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;126&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        http.request map_webrick_to_net_http_req(req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;127&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;128&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # The following comments are from the IETF document&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;129&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # &amp;quot;Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;130&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # https://tools.ietf.org/html/rfc7231#section-4.3.6&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;131&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;132&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # A proxy MUST send an appropriate Via header field, as described&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;133&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # below, in each message that it forwards.  An HTTP-to-HTTP gateway&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;134&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # MUST send an appropriate Via header field in each inbound request&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;135&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # message and MAY send a Via header field in forwarded response&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;136&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      # messages.&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;137&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      client_conn.puts &amp;lt;&amp;lt;~eos.chomp&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;138&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        HTTP/1.1 #{resp.code}&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;139&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        Via: #{[&amp;quot;1.1 ForwardProxy&amp;quot;, resp[&amp;#39;Via&amp;#39;]].compact.join(&amp;#39;, &amp;#39;)}&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;9&quot; data-linenumber=&quot;140&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;9&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        #{resp.each.map { |header, value| &amp;quot;#{header}: #{value}&amp;quot; }.join(&amp;quot;\n&amp;quot;)}&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;141&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;142&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        #{resp.body}&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;143&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      eos&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;144&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;145&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;146&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def map_webrick_to_net_http_req(req)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;5&quot; data-linenumber=&quot;147&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;5&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      req_headers = Hash[req.header.map { |k, v| [k, v.first] }]&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;148&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;149&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      klass = case req.request_method&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;150&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;              when METHOD_GET then Net::HTTP::Get&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;missed&quot; data-hits=&quot;0&quot; data-linenumber=&quot;151&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;              when METHOD_POST then Net::HTTP::Post&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;152&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;              else&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;missed&quot; data-hits=&quot;0&quot; data-linenumber=&quot;153&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;                raise HTTPMethodNotImplemented&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;154&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;              end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;155&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;156&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      klass.new(req.path, req_headers)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;157&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;158&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;159&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def transfer(dest_conn, src_conn)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;2&quot; data-linenumber=&quot;160&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;2&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      IO.copy_stream(src_conn, dest_conn)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;161&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    rescue =&amp;gt; e&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;missed&quot; data-hits=&quot;0&quot; data-linenumber=&quot;162&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      log(e.message, &amp;quot;WARNING&amp;quot;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;163&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;164&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;165&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def parse_req(client_conn)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;166&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      WEBrick::HTTPRequest.new(WEBrick::Config::HTTP).tap do |req|&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;167&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        req.parse(client_conn)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;168&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;169&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    rescue =&amp;gt; e&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;missed&quot; data-hits=&quot;0&quot; data-linenumber=&quot;170&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      throw HTTPParseError.new(e.message)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;171&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;172&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;173&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def log(str, level = &amp;#39;INFO&amp;#39;)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;15&quot; data-linenumber=&quot;174&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;15&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      puts &amp;quot;[#{Time.now}] #{level} #{str}&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;175&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;176&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;  end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;177&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;end&lt;/code&gt;
      &lt;/li&gt;

  &lt;/ol&gt;
&lt;/pre&gt;</pre>

<p>&lt;/div&gt;</p>

<pre>      &lt;div class=&quot;source_table&quot; id=&quot;7eb8b9fd428dbcfc9e26e54dab1a24e2580a5f73&quot;&gt;
&lt;div class=&quot;header&quot;&gt;
  &lt;h3&gt;lib/forward_proxy/thread_pool.rb&lt;/h3&gt;
  &lt;h4&gt;&lt;span class=&quot;green&quot;&gt;100.0 %&lt;/span&gt; covered&lt;/h4&gt;
  &lt;div&gt;
    &lt;b&gt;20&lt;/b&gt; relevant lines. 
    &lt;span class=&quot;green&quot;&gt;&lt;b&gt;20&lt;/b&gt; lines covered&lt;/span&gt; and
    &lt;span class=&quot;red&quot;&gt;&lt;b&gt;0&lt;/b&gt; lines missed.&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;pre&gt;
  &lt;ol&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;1&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;module ForwardProxy&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;2&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;  class ThreadPool&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;3&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    attr_reader :queue, :threads, :size&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;4&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;5&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def initialize(size)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;6&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @size    = size&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;7&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @queue   = Queue.new&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;8&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      @threads = []&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;9&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;10&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;11&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def start&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;12&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      size.times do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;13&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;        threads &amp;lt;&amp;lt; Thread.new do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;96&quot; data-linenumber=&quot;14&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;96&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;          catch(:exit) do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;96&quot; data-linenumber=&quot;15&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;96&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;            loop do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;99&quot; data-linenumber=&quot;16&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;99&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;              job, args = queue.pop&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;99&quot; data-linenumber=&quot;17&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;99&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;              job.call(*args)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;18&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;            end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;19&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;          end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;96&quot; data-linenumber=&quot;20&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;96&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;21&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;22&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;23&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;24&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def schedule(*args, &amp;amp;block)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;99&quot; data-linenumber=&quot;25&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;99&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      queue.push([block, args])&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;26&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;27&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;28&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;    def shutdown&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;29&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      threads.each do&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;192&quot; data-linenumber=&quot;30&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;192&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;        schedule { throw :exit }&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;31&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;      end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;32&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;3&quot; data-linenumber=&quot;33&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;3&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;      threads.each(&amp;amp;:join)&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;34&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;    end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;35&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;  end&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;36&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;end&lt;/code&gt;
      &lt;/li&gt;

  &lt;/ol&gt;
&lt;/pre&gt;</pre>

<p>&lt;/div&gt;</p>

<pre>      &lt;div class=&quot;source_table&quot; id=&quot;e2da9243213d13a1f1a550ab692a4692e0970fdd&quot;&gt;
&lt;div class=&quot;header&quot;&gt;
  &lt;h3&gt;lib/forward_proxy/version.rb&lt;/h3&gt;
  &lt;h4&gt;&lt;span class=&quot;green&quot;&gt;100.0 %&lt;/span&gt; covered&lt;/h4&gt;
  &lt;div&gt;
    &lt;b&gt;2&lt;/b&gt; relevant lines. 
    &lt;span class=&quot;green&quot;&gt;&lt;b&gt;2&lt;/b&gt; lines covered&lt;/span&gt; and
    &lt;span class=&quot;red&quot;&gt;&lt;b&gt;0&lt;/b&gt; lines missed.&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;pre&gt;
  &lt;ol&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;1&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;module ForwardProxy&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;covered&quot; data-hits=&quot;1&quot; data-linenumber=&quot;2&quot;&gt;
        &lt;span class=&quot;hits&quot;&gt;1&lt;/span&gt;

        &lt;code class=&quot;ruby&quot;&gt;  VERSION = &amp;quot;0.1.4&amp;quot;&lt;/code&gt;
      &lt;/li&gt;

      &lt;li class=&quot;never&quot; data-hits=&quot;&quot; data-linenumber=&quot;3&quot;&gt;

        &lt;code class=&quot;ruby&quot;&gt;end&lt;/code&gt;
      &lt;/li&gt;

  &lt;/ol&gt;
&lt;/pre&gt;</pre>

<p>&lt;/div&gt;</p>

<pre>    &lt;/div&gt;
  &lt;/div&gt;
&lt;/body&gt;</pre>

<p>&lt;/html&gt;</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

